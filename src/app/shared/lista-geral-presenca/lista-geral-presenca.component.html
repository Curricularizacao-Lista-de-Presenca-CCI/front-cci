<body>

  <div class="d-flex min-vh-100">

    <app-navbar></app-navbar>

    <div class="flex-fill p-5" style="overflow-y: visible; min-height: 100vh;">

      <div class="content container-fluid p-0">
        <h2 class="titulo-principal text-primary fw-bold mb-5">Lista Geral de Presença</h2>

        <div class="caixa-lista shadow p-4 rounded">
          <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-3">
            <div>
              <h5 class="titulo-lista mb-0">Lista Membros</h5>
            </div>
            <div class="d-flex align-items-center gap-4">
              
              <div class="input-group busca">
                <span class="input-group-text bg-white border-end-0">
                  <i class="bi bi-search text-muted"></i>
                </span>
                <input type="text" class="form-control border-start-0" placeholder="Buscar" />
              </div>

              <div class="d-flex justify-content-center">
                  <button class="btn btn-primary justify-content-end" (click)="abrirModalChamada()">
                    Editar chamada
                  </button>
              </div>

              <div class="d-flex justify-content-center">
                  <button class="btn btn-success justify-content-end" (click)="abrirModalChamada()">
                    Finalizar chamada
                  </button>
              </div>

            </div>
          </div>

          <div class="table-responsive">
            <table class="table tabela-membros">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nome</th>
                  <th>Inscrição</th>
                  <th>Status</th>
                </tr>
              </thead>

              <tbody>

                <tr *ngFor="let aluno of alunos">
                  <td data-label="ID">{{ aluno.idAluno }}</td>
                  <td data-label="Nome">{{ aluno.nomeAluno }}</td>
                  <td data-label="Inscrição">outra informação</td>
                  <td data-label="Status"><span class="badge status {{ aluno.status == 'Sim' ? 'ativo' : 'inativo' }}">
                      {{ aluno.status }}
                    </span></td>
              </tbody>

            </table>
          </div>


          <!-- <nav class="d-flex justify-content-end mt-3">
        <ul class="pagination pagination-sm mb-0">
          <li class="page-item disabled"><a class="page-link">‹</a></li>
          <li class="page-item active"><a class="page-link">1</a></li>
          <li class="page-item"><a class="page-link">2</a></li>
          <li class="page-item"><a class="page-link">3</a></li>
          <li class="page-item"><a class="page-link">4</a></li>
          <li class="page-item"><a class="page-link">…</a></li>
          <li class="page-item"><a class="page-link">40</a></li>
          <li class="page-item"><a class="page-link">›</a></li>
        </ul>
      </nav> -->
        </div>
      </div>
    </div>
  </div>

</body>

<!-- Dialog de Confirmação de Registro -->
<div class="modal fade" id="dialogFinalizarChamada" #dialogFinalizarChamadaRef tabindex="-1"
  aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Finalizar Chamada</h1>
        <button type="button" class="btn-close" (click)="dialogFinalizarChamada = false" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="fw-bold">Deseja realmente finalizar a lista de chamada?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="dialogFinalizarChamada = false">Cancelar</button>

        <button type="button" (click)="finalizarChamada()" class="btn btn-success">
          Finalizar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Toast de Erro -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div id="liveToast" #liveToastError class="toast text-bg-danger border-0" role="alert" aria-live="assertive"
    aria-atomic="true">

    <div class="toast-header text-bg-danger border-0">
      <strong class="me-auto">Erro ao finalizar chamada</strong>

      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>

    <div class="toast-body">
      {{ mensagemErro }}
    </div>
  </div>
</div>

<!-- Toast de Sucesso -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div id="liveToast" #liveToastSuccess class="toast text-bg-success border-0" role="alert" aria-live="assertive"
    aria-atomic="true">

    <div class="toast-header text-bg-success border-0">
      <strong class="me-auto">Chamada finalizada com sucesso</strong>

      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>

    <div class="toast-body">
      {{ mensagemSucesso }}
    </div>
  </div>
</div>